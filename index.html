<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <link rel="icon" href="./favicon.ico" />
    <meta name="referrer" content="no-referrer" />
    <meta
      name="viewport"
      content="width=device-width, initial-scale=1.0, minimum-scale=1.0, maximum-scale=1.0,user-scalable=no"
      id="viewport"
    />
    <!-- iOS Safari 优化 -->
    <meta name="apple-mobile-web-app-capable" content="yes" />
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent" />
    <meta name="apple-mobile-web-app-title" content="抖音" />
    <meta name="mobile-web-app-capable" content="yes" />
    <meta name="theme-color" content="#000000" />
    <meta name="msapplication-navbutton-color" content="#000000" />
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent" />
    
    <!-- PWA Manifest -->
    <link rel="manifest" href="/manifest.json" />
    
    <!-- PWA Meta Tags -->
    <meta name="application-name" content="抖音" />
    <meta name="apple-mobile-web-app-capable" content="yes" />
    <meta name="apple-mobile-web-app-status-bar-style" content="black-translucent" />
    <meta name="apple-mobile-web-app-title" content="抖音" />
    <meta name="mobile-web-app-capable" content="yes" />
    <meta name="msapplication-TileColor" content="#000000" />
    <meta name="msapplication-tap-highlight" content="no" />
    
    <!-- iOS Safari 全屏优化 -->
    <meta name="apple-touch-fullscreen" content="yes" />
    <meta name="apple-mobile-web-app-orientations" content="portrait" />
    <!-- 防止iOS Safari显示地址栏 -->
    <meta name="format-detection" content="telephone=no" />
    <meta name="format-detection" content="email=no" />
    <title>抖音</title>
<script src="https://lib.baomitu.com/vue/3.4.21/vue.runtime.global.prod.min.js"></script>
<script src="https://lib.baomitu.com/vue-router/4.3.0/vue-router.global.prod.min.js"></script>
<script src="https://lib.baomitu.com/vue-demi/0.14.7/index.iife.min.js"></script>
<script src="https://lib.baomitu.com/Mock.js/1.0.1-beta3/mock-min.js"></script>
    <!--    <script crossorigin="anonymous"-->
    <!--            integrity="sha512-KkkY/3auRhaXDFzFMpwtZ+BrS8EBQ+GfiBxdJ9jGMi6Gg74/sYbq/IZpY593pkNjTmbeRfBwjpZo+7gcpH45Ww=="-->
    <!--            src="https://lib.baomitu.com/eruda/3.0.1/eruda.min.js"></script>-->
    <!--      <script>eruda.init();</script>-->
    <!--    <script>-->
    <!--      var _hmt = _hmt || []-->
    <!--      ;(function () {-->
    <!--        var hm = document.createElement('script')-->
    <!--        hm.src = 'https://hm.baidu.com/hm.js?6f910830f5a7d8b5f7e75d8d67458a7a'-->
    <!--        var s = document.getElementsByTagName('script')[0]-->
    <!--        s.parentNode.insertBefore(hm, s)-->
    <!--      })()-->
    <!--    </script>-->
    <style>
      ::-webkit-scrollbar {
        display: none; /* Chrome Safari */
      }

      /* iOS Safari 优化样式 */
      :root {
        --vh: 1vh;
        --status-bar-height: env(safe-area-inset-top);
      }
      
      body {
        -webkit-overflow-scrolling: touch;
        -webkit-touch-callout: none;
        -webkit-user-select: none;
        -khtml-user-select: none;
        -moz-user-select: none;
        -ms-user-select: none;
        user-select: none;
        position: fixed;
        width: 100%;
        height: 100vh;
        height: calc(var(--vh, 1vh) * 100);
        height: -webkit-fill-available;
        overflow: hidden;
        margin: 0;
        padding: 0;
        padding-top: env(safe-area-inset-top);
        padding-bottom: env(safe-area-inset-bottom);
        padding-left: env(safe-area-inset-left);
        padding-right: env(safe-area-inset-right);
      }

      #app {
        height: 100vh;
        height: calc(var(--vh, 1vh) * 100);
        height: -webkit-fill-available;
        overflow: hidden;
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        margin: 0;
        padding: 0;
        z-index: 1;
      }

      /* 隐藏iOS Safari地址栏 */
      @media screen and (max-width: 768px) {
        body {
          position: fixed;
          width: 100%;
          height: 100vh;
          height: calc(var(--vh, 1vh) * 100);
          height: -webkit-fill-available;
          overflow: hidden;
          padding-top: env(safe-area-inset-top);
          padding-bottom: env(safe-area-inset-bottom);
          padding-left: env(safe-area-inset-left);
          padding-right: env(safe-area-inset-right);
        }
        
        #app {
          position: fixed;
          top: 0;
          left: 0;
          width: 100%;
          height: 100%;
          height: 100vh;
          height: calc(var(--vh, 1vh) * 100);
          height: -webkit-fill-available;
          margin: 0;
          padding: 0;
          z-index: 1;
        }
        
        /* 防止iOS Safari自动缩放 */
        input, textarea, select {
          font-size: 16px;
        }
      }

      .fade-in {
        animation: fade-in 0.3s;
      }

      .fade-out {
        animation: fade-out 0.4s;
      }

      @keyframes fade-in {
        from {
          opacity: 0;
        }
        to {
          opacity: 1;
        }
      }

      @keyframes fade-out {
        from {
          opacity: 1;
        }
        to {
          opacity: 0;
          display: none;
        }
      }
    </style>
    <script type="module" crossorigin src="./js/index-D742R-PU.js"></script>
    <link rel="modulepreload" crossorigin href="./js/vendor-BMWdzOBB.js">
    <link rel="modulepreload" crossorigin href="./js/common-eO_hgNLl.js">
    <link rel="modulepreload" crossorigin href="./js/other-DV0FsS_V.js">
    <link rel="stylesheet" crossorigin href="./assets/common-Cu6Y5kl-.css">
    <link rel="stylesheet" crossorigin href="./assets/other-Du_Ys_Ln.css">
    <link rel="stylesheet" crossorigin href="./assets/index-Ctqf9ett.css">
  </head>
  <body>
    <div id="app"></div>

    <script>
      // iOS Safari 优化脚本 - 强制隐藏地址栏
      (function() {
        // 检测是否为iOS设备
        const isIOS = /iPad|iPhone|iPod/.test(navigator.userAgent) && !window.MSStream;
        const isSafari = /Safari/.test(navigator.userAgent) && /Apple Computer/.test(navigator.vendor);
        
        if (isIOS && isSafari) {
          // 强制设置视口高度
          function setViewportHeight() {
            const vh = window.innerHeight * 0.01;
            document.documentElement.style.setProperty('--vh', `${vh}px`);
            
            // 获取安全区域信息
            const safeAreaTop = getComputedStyle(document.documentElement).getPropertyValue('--status-bar-height') || '0px';
            const safeAreaTopValue = parseInt(safeAreaTop) || 0;
            
            // 设置全屏高度，包括状态栏区域
            const fullHeight = window.innerHeight + safeAreaTopValue;
            document.body.style.height = fullHeight + 'px';
            document.documentElement.style.height = fullHeight + 'px';
            
            // 强制应用占满整个屏幕
            const app = document.getElementById('app');
            if (app) {
              app.style.height = fullHeight + 'px';
              app.style.marginTop = `-${safeAreaTopValue}px`;
            }
          }
          
          // 立即执行
          setViewportHeight();
          
          // 页面加载完成后执行
          window.addEventListener('load', function() {
            setViewportHeight();
            // 多次延迟执行，确保地址栏隐藏
            setTimeout(setViewportHeight, 100);
            setTimeout(setViewportHeight, 300);
            setTimeout(setViewportHeight, 500);
          });
          
          // 监听窗口大小变化
          window.addEventListener('resize', function() {
            setViewportHeight();
          });
          
          // 监听滚动事件，强制隐藏地址栏
          let scrollTimer = null;
          window.addEventListener('scroll', function() {
            // 清除之前的定时器
            if (scrollTimer) clearTimeout(scrollTimer);
            
            // 立即隐藏地址栏
            setViewportHeight();
            
            // 延迟再次设置，确保地址栏隐藏
            scrollTimer = setTimeout(function() {
              setViewportHeight();
            }, 50);
          });
          
          // 监听触摸事件，触发地址栏隐藏
          let touchStartY = 0;
          document.addEventListener('touchstart', function(e) {
            touchStartY = e.touches[0].clientY;
          }, { passive: true });
          
          document.addEventListener('touchmove', function(e) {
            const touchY = e.touches[0].clientY;
            const diff = touchStartY - touchY;
            
            // 向下滑动时强制隐藏地址栏
            if (diff > 0) {
              setViewportHeight();
            }
          }, { passive: true });
          
          // 监听触摸结束事件
          document.addEventListener('touchend', function(e) {
            setTimeout(setViewportHeight, 100);
          }, { passive: true });
        }
        
        // 防止双击缩放
        let lastTouchEnd = 0;
        document.addEventListener('touchend', function(event) {
          const now = (new Date()).getTime();
          if (now - lastTouchEnd <= 300) {
            event.preventDefault();
          }
          lastTouchEnd = now;
        }, false);
        
        // 防止长按选择文本
        document.addEventListener('selectstart', function(e) {
          e.preventDefault();
        });
        
        // 防止上下文菜单
        document.addEventListener('contextmenu', function(e) {
          e.preventDefault();
        });
      })();
      
      // 注册 Service Worker (PWA)
      if ('serviceWorker' in navigator) {
        window.addEventListener('load', function() {
          navigator.serviceWorker.register('/sw.js')
            .then(function(registration) {
              console.log('SW registered: ', registration);
            })
            .catch(function(registrationError) {
              console.log('SW registration failed: ', registrationError);
            });
        });
      }
    </script>
  </body>
</html>
